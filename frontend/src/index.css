@tailwind base;
@tailwind components;
@tailwind utilities;

/* global font + bg */
:root,
body,
#root {
  font-family: "Raleway", system-ui, -apple-system, BlinkMacSystemFont, sans-serif !important;
  background: #000;
  color: #fff;
  height: 100%;
}

body {
  background-image: url("/rabbit-bg.svg"); /* adjust path to real asset */
  background-repeat: no-repeat;
  background-position: center top;
  background-size: cover;
}

/* --- Active stylesheet (clean, single :root, no legacy hover-foot) --- */

:root {
  --brand-gold: #f9c86b;
  --brand-purple: #a24bff;
}

/* section headers */
.section-title-gold,
.section-title-purple {
  font-weight: 700;
  letter-spacing: 0.04em;
  text-transform: uppercase;
}
.section-title-gold { color: var(--brand-gold); }
.section-title-purple { color: var(--brand-purple); }

/* ROW BASE: stable layout, subtle motion */
.table-row {
  animation: none;
  transform: translateY(0) scale(1);
  transition: transform 140ms cubic-bezier(.2,1,.2,1);
  will-change: auto !important;
  position: relative;
  min-height: 44px;
  padding: 4px 0;
}
.table-row > * {
  position: relative;
  z-index: 2;
}

/* gentle hover lift */
.table-row:hover { transform: translateY(-1px) scale(1.01); }

/* scroll/enter pop-in */
@keyframes rowPopIn {
  0% { opacity: 0; transform: translateY(6px) scale(0.985); }
  60% { opacity: 1; transform: translateY(-0.5px) scale(1.005); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}
.table-row.reveal {
  animation: rowPopIn 320ms cubic-bezier(.2,1,.2,1) both;
}

/* stagger reveal by row index (uses --row-index set on the row element) */
.table-row.reveal {
  animation-delay: calc(var(--row-index, 0) * 30ms);
}

/* accessibility: respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .table-row,
  .table-row:hover,
  .table-row.reveal {
    animation: none !important;
    transform: none !important;
  }
}

/* Apply similar gentle motion to legacy/card rows */
.crypto-row { transition: transform 140ms cubic-bezier(.2,1,.2,1); }
.crypto-row:hover { transform: translateY(-1px) scale(1.01); }

/* ambient */
.table-row::before {
  content: '';
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: -4px;
  width: 62%;
  height: 8px;
  pointer-events: none;
  border-radius: 9999px;
  z-index: 0;
}

/* thin bottom accent line on hover for a crisper separation */
.table-row::after {
  content: '';
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: 2px;
  width: 52%;
  height: 2px;
  border-radius: 9999px;
  opacity: 0;
  transition: opacity 140ms ease, transform 140ms ease;
  z-index: 1;
}
.table-row.is-gain::after,
.table-row[data-state="gain"]::after {
  background: linear-gradient(90deg, rgba(249,200,107,0.95) 0%, rgba(249,200,107,0.35) 100%);
}
.table-row.is-loss::after,
.table-row[data-state="loss"]::after {
  background: linear-gradient(90deg, rgba(162,75,255,0.95) 0%, rgba(162,75,255,0.35) 100%);
}
.table-row:hover::after { opacity: 1; transform: translateX(-50%) translateY(-1px); }
.table-row.is-gain::before,
.table-row[data-state="gain"]::before {
  background: radial-gradient(circle, rgba(249,200,107,0.16) 0%, rgba(249,200,107,0) 100%);
}
.table-row.is-loss::before,
.table-row[data-state="loss"]::before {
  background: radial-gradient(circle, rgba(162,75,255,0.16) 0%, rgba(162,75,255,0) 100%);
}

/* visible hover diamond */
.row-hover-glow {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: -6px;
  width: 58%;
  height: 10px;
  pointer-events: none;
  opacity: 0;
  transition: opacity 90ms ease-out;
  border-radius: 9999px;
  z-index: 1;
  -webkit-mask-image: radial-gradient(ellipse at 50% 100%, rgba(0,0,0,1) 46%, rgba(0,0,0,0) 65%);
  mask-image: radial-gradient(ellipse at 50% 100%, rgba(0,0,0,1) 46%, rgba(0,0,0,0) 65%);
}
.row-hover-glow-gain {
  background: radial-gradient(circle, rgba(249,200,107,0.65) 0%, rgba(249,200,107,0.16) 60%, rgba(249,200,107,0) 100%);
}
.row-hover-glow-loss {
  background: radial-gradient(circle, rgba(162,75,255,0.65) 0%, rgba(162,75,255,0.16) 60%, rgba(162,75,255,0) 100%);
}
.table-row:hover .row-hover-glow {
  opacity: 1;
}

/* keep the 3-min alignment you added */
.panel-3m {
  position: relative;
  overflow: visible;
}
.crypto-row[data-state="gain"]::before,
.mw-table-row.is-gain::before,
.mw-table-row[data-state="gain"]::before {
  background: radial-gradient(circle at center, rgba(249,200,107,0.12) 0%, rgba(249,200,107,0) 100%);
}
.crypto-row.is-loss::before,
.crypto-row[data-state="loss"]::before,
.mw-table-row.is-loss::before,
.mw-table-row[data-state="loss"]::before {
  background: radial-gradient(circle at center, rgba(162,75,255,0.12) 0%, rgba(162,75,255,0) 100%);
}

.crypto-row > *,
.mw-table-row > *,
.mw-row > *,
.mw-tr > * { position: relative; z-index: 2; }

/* shared colors */
.text-teal { color: #4aded0; }
.gain-text { color: var(--brand-gold); }
.loss-text { color: var(--brand-purple); }

/*
  Pixel-locked layout helpers for 3-minute panels. Wrap your rows in
  an element with .panel-3m (components have been updated) to get
  consistent column widths and alignment across gainers/losers.

  Fallback aliases are included so older markup using .rk/.sym/.last/.chg
  or data-col attributes will also align.
*/
.panel-3m {
  overflow: visible; /* allow hover glow to show */
  position: relative;
}

.panel-3m .rank-badge,
.panel-3m .rk,
.panel-3m [data-col="rank"] {
  flex: 0 0 22px;
  width: 22px;
  min-width: 22px;
  height: 22px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.panel-3m .price,
.panel-3m [data-col="price"],
.panel-3m .val,
.panel-3m .last {
  flex: 0 0 108px;
  width: 108px;
  min-width: 108px;
  text-align: right;
}

.panel-3m .pct,
.panel-3m [data-col="pct"],
.panel-3m .chg,
.panel-3m .delta {
  flex: 0 0 80px;
  width: 80px;
  min-width: 80px;
  text-align: right;
}

.panel-3m .symbol,
.panel-3m [data-col="symbol"],
.panel-3m .sym {
  min-width: 0; /* allow truncation instead of pushing layout */
  flex: 1 1 auto;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* TokenRow optional class names for fixed columns */
.token-rank { width: 2.2rem; height: 2.2rem; border-radius: 9999px; background: rgba(34,32,40,0.85); border: 1px solid rgba(249,200,107,0.38); display:flex; align-items:center; justify-content:center; font-size:.75rem; font-weight:600; flex:0 0 auto; }
.token-row.is-loss .token-rank { border-color: rgba(162,75,255,0.5); }
.token-symbol-block { flex:1 1 auto; min-width:5rem; }
.token-price-block { width:6.2rem; text-align:right; }
.token-price-current { color:#4aded0; font-weight:600; }
.token-price-prev { color:rgba(255,255,255,.35); font-size:.68rem; line-height:1; }
.token-pct { width:4.5rem; text-align:right; font-weight:700; }
.token-pct-gain { color: var(--brand-gold); }
.token-pct-loss { color: var(--brand-purple); }
.token-actions { width:2.6rem; display:flex; gap:.3rem; justify-content:flex-end; }
.token-row-line {
  position: absolute;
  left: 3rem;
  right: 3.4rem;
  height: 4px;
  top: 50%;
  transform: translateY(-50%);
  background: linear-gradient(90deg, rgba(249,200,107,0.12) 0%, rgba(0,0,0,0) 100%);
  pointer-events: none;
  max-width: none;
}
.token-row.is-loss .token-row-line {
  background: linear-gradient(90deg, rgba(162,75,255,0.14) 0%, rgba(0,0,0,0) 100%);
}

/* --- Aliases for `tr-*` class names (compat) --- */
.tr-col-symbol { display:flex; align-items:center; gap:.4rem; min-width:6.2rem; flex:0 0 6.2rem; }
.tr-rank { width:1.7rem; height:1.7rem; border-radius:9999px; background:rgba(34,32,40,0.8); border:1px solid rgba(249,200,107,0.55); display:flex; align-items:center; justify-content:center; font-size:0.65rem; font-weight:600; }
.token-row.is-loss .tr-rank { border-color: rgba(162,75,255,0.55); }
.tr-symbol { font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* tighter row shell and compact columns for narrow viewports */
.token-row {
  display: flex;
  align-items: center;
  width: 100%;
  gap: 0.75rem;
  padding: 6px 0.75rem;
  min-height: 50px;
  position: relative;
}

.tr-col-price { width: 5.6rem; display:flex; align-items:flex-end; }
.tr-col-pct { width: 4.1rem; display:flex; justify-content:flex-end; }
.tr-col-actions { width: 2.4rem; display:flex; justify-content:flex-end; }
.tr-price-current { color:#4aded0; font-weight:600; line-height:1; }
.tr-price-prev { color:rgba(255,255,255,.35); font-size:.65rem; line-height:1.1; }
.tr-star, .tr-info { background:none; border:none; color:rgba(255,255,255,.5); cursor:pointer; font-size:.8rem; }

/* make the two 1-min columns act the same */
.one-min-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(520px, 1fr));
  column-gap: 2rem;
  row-gap: 0;
  align-items: flex-start;
}

/* center the rows inside each column so both sides line up visually */
.panel-3m .token-row {
  max-width: 520px;
  margin-left: 0;
}
.panel-3m {
  gap: 0.5rem !important;
}

.panel-3m .token-row {
  max-width: 520px;
  margin-left: 0;
}

/* placeholder for empty 3-min panels so layout stays balanced */
.panel-3m-empty {
  min-height: 180px;
  display: flex;
  align-items: center;
  color: rgba(255,255,255,.4);
}

/* Normalize parents and token column behaviour so both two-column panels
   match pixel-for-pixel regardless of parent padding, and ensure symbols
   never wrap (they truncate instead). This fixes the three causes of
   subtle misalignment discussed earlier: parent gap/padding, accent offsets,
   and symbol wrapping on narrow widths. */
.panel-3m {
  padding-left: 0;
  padding-right: 0;
}

.token-symbol-block {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.token-row {
  /* ensure both columns have identical vertical rhythm; tighten padding so
    content is less likely to wrap and rows feel compact */
  padding: 8px 1rem;
  min-height: 52px;
}

/* --- UI freeze block provided by user ------------------------------------------------ */

/* headings */
.section-head { display:flex; align-items:center; gap:.6rem; }
.section-title { font-weight:700; font-size:13px; letter-spacing:.02em; }
.section-sub { color:rgba(255,255,255,.36); font-size:11px }

/* panel shell for approx 3-minute blocks */
.panel-3m { position:relative; padding:12px 12px 8px; border-radius:10px; background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01)); }
.panel-3m-empty { min-height:90px; display:flex; align-items:center; justify-content:center; color:rgba(255,255,255,.08); font-size:12px }

/* token-row shell */
.token-row { display:flex; gap:8px; align-items:center; padding:6px 8px; position:relative; }
.token-row .tr-col { display:flex; align-items:center }
.tr-col-symbol { min-width:110px; gap:8px }
.tr-col-price { width:112px; flex-direction:column; align-items:flex-end; }
.tr-col-pct { width:86px; justify-content:flex-end }
.tr-col-actions { width:44px; justify-content:center; flex-direction:column }

/* thin centered accent line behind tokens */
.token-row-line { position:absolute; inset:0 auto 0 0; left:50%; transform:translateX(-50%); width:calc(100% - 56px); height:1px; background:linear-gradient(90deg, transparent, rgba(255,255,255,.035), transparent); z-index:0; pointer-events:none }
.token-row > * { position:relative; z-index:1 }

/* kill legacy outer glow while keeping markup intact */
.row-hover-glow, .row-hover-glow-gain, .row-hover-glow-loss { opacity:0; pointer-events:none; height:0; width:0 }

/* pct colors */
.token-pct-gain { color:#c8f09b; }
.token-pct-loss { color:#e6a7ff; }

/* tr alias widths to avoid table wrapping */
.tr-col { white-space:nowrap }
.tr-col-symbol .tr-symbol { font-weight:600 }
.tr-rank { width:28px; text-align:center; display:inline-block }

/* small helpers */
.reveal { animation:tokenFade .34s ease both }
@keyframes tokenFade { from { opacity:0; transform:translateY(4px) } to { opacity:1; transform:none } }

/* EOF UI freeze block --------------------------------------------------------------- */
